/* === Tailwind (nécessaire !) ===================================== */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* === Base ========================================================= */
:root { color-scheme: light dark; }
html, body, #root { height: 100%; }
body { margin: 0; }
.pixelated { image-rendering: pixelated; image-rendering: crisp-edges; }

/* === Halo animé (HD only, 32x32, 6 frames) ======================= */
.halo {
  position: absolute; left: 50%; top: 50%;
  transform: translate(-50%, -50%) scale(2); 
  pointer-events: none;
  width: 32px; height: 32px;
  background-repeat: no-repeat; background-size: auto 100%;
  animation: halo-anim 900ms steps(6) infinite;
  opacity: .9;
  filter: drop-shadow(0 0 2px rgba(0,0,0,.45));
}
@keyframes halo-anim {
  from { background-position-x: 0; }
  to   { background-position-x: -600%; }
}

/* === Ombre sous l’icône ========================================== */
.marker::before{
  content: ""; position: absolute; left: 50%; top: 50%;
  transform: translate(-50%, -50%) scale(2);
  width: 40px; height: 40px; border-radius: 9999px;
  background: radial-gradient(closest-side, rgba(0,0,0,.40), rgba(0,0,0,0) 70%);
  pointer-events: none;
}

/* === Icône pixel (HD only, cellule 32x32, upscale x1.25) ========= */
.icon-pixel{
  position: absolute; left: 50%; top: 50%;
  width: 32px; height: 32px;
  transform: translate(-50%, -50%) scale(2);
  transform-origin: center;
  image-rendering: pixelated;
  filter: drop-shadow(0 1px 0 rgba(0,0,0,.5)) drop-shadow(0 0 2px rgba(0,0,0,.25));
}

/* === Mapping spritesheet (ligne d’icônes 32x32) =================== */
.ico { background-repeat: no-repeat; background-size: auto; }
.ico-castle   { background-position:    0px 0px; width:32px; height:32px; }
.ico-barracks { background-position:  -32px 0px; width:32px; height:32px; }
.ico-tavern   { background-position:  -64px 0px; width:32px; height:32px; }
.ico-plaza    { background-position:  -96px 0px; width:32px; height:32px; }
.ico-archives { background-position: -128px 0px; width:32px; height:32px; }
.ico-book     { background-position: -160px 0px; width:32px; height:32px; }

/* === Petits plus d’accessibilité ================================= */
a:focus-visible { outline: none; box-shadow: 0 0 0 4px rgba(245,158,11,.35); }

@media (prefers-color-scheme: dark) {
  .marker::before{
    background: radial-gradient(closest-side, rgba(0,0,0,.5), rgba(0,0,0,0) 70%);
  }
}
